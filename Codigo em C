// Estruturas basicas e dados para teste

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAX_PRODUTOS 50

typedef struct {
    int codigo;
    char nome[50];
    char categoria[30];
    float preco;
    int quantidade;
    int estoque_minimo;
} Produto;

Produto produtos[MAX_PRODUTOS];
int total_produtos = 0;

void carregarDadosExemplo() {
    Produto exemplos[] = {
        {1, "Notebook Dell", "Eletronicos", 2500.00, 5, 2},
        {2, "Mouse Logitech", "Eletronicos", 89.90, 15, 5},
        {3, "Teclado Mecanico", "Eletronicos", 199.90, 8, 3},
        {4, "Caderno Universitario", "Papelaria", 24.90, 50, 10},
        {5, "Caneta Esferografica", "Papelaria", 2.50, 200, 50}
    };
    
    total_produtos = 5;
    for(int i = 0; i < total_produtos; i++) {
        produtos[i] = exemplos[i];
    }
}

void limparBuffer() {
    int c;
    while ((c = getchar()) != '\n' && c != EOF);
}

void mostrarMenu() {
    printf("\n=== SISTEMA DE ESTOQUE ===\n");
    printf("1. Listar Produtos\n");
    printf("0. Sair\n");
    printf("Escolha uma opcao: ");
}

int main() {
    carregarDadosExemplo();
    
    printf("SISTEMA DE CONTROLE DE ESTOQUE\n");
    printf("%d produtos carregados\n\n", total_produtos);
    
    int opcao;
    
    do {
        mostrarMenu();
        scanf("%d", &opcao);
        limparBuffer();
        
        if(opcao == 1) {
            printf("\nLista de produtos em desenvolvimento...\n");
        } else if(opcao == 0) {
            printf("Saindo...\n");
        } else {
            printf("Opcao invalida!\n");
        }
        
    } while(opcao != 0);
    
    return 0;
}

// Sistema de listagem

void listarProdutos() {
    printf("\n=== LISTA DE PRODUTOS ===\n");
    for(int i = 0; i < total_produtos; i++) {
        printf("%d. %s | %s | R$ %.2f | %d unidades\n",
               produtos[i].codigo,
               produtos[i].nome,
               produtos[i].categoria,
               produtos[i].preco,
               produtos[i].quantidade);
    }
}

void mostrarMenu() {
    printf("\n=== SISTEMA DE ESTOQUE ===\n");
    printf("1. Listar Produtos\n");
    printf("0. Sair\n");
    printf("Escolha uma opcao: ");
}

int main() {
    carregarDadosExemplo();
    
    printf("SISTEMA DE CONTROLE DE ESTOQUE\n");
    printf("%d produtos carregados\n\n", total_produtos);
    
    int opcao;
    
    do {
        mostrarMenu();
        scanf("%d", &opcao);
        limparBuffer();
        
        switch(opcao) {
            case 1:
                listarProdutos();
                break;
            case 0:
                printf("Saindo...\n");
                break;
            default:
                printf("Opcao invalida!\n");
        }
        
    } while(opcao != 0);
    
    return 0;
}

// Sistema de busca basica

void buscarProduto() {
    char termo[50];
    printf("\nDigite o nome do produto: ");
    scanf("%49s", termo);
    limparBuffer();
    
    printf("\nResultados para '%s':\n", termo);
    int encontrados = 0;
    
    for(int i = 0; i < total_produtos; i++) {
        if(strstr(produtos[i].nome, termo) != NULL) {
            printf("- %s | %s | R$ %.2f | %d unidades\n",
                   produtos[i].nome,
                   produtos[i].categoria,
                   produtos[i].preco,
                   produtos[i].quantidade);
            encontrados++;
        }
    }
    
    if(encontrados == 0) {
        printf("Nenhum produto encontrado.\n");
    }
}

void mostrarMenu() {
    printf("\n=== SISTEMA DE ESTOQUE ===\n");
    printf("1. Listar Produtos\n");
    printf("2. Buscar Produto\n");
    printf("0. Sair\n");
    printf("Escolha uma opcao: ");
}

//OrganizaÃ§ao por Categorias

void produtosPorCategoria() {
    printf("\n=== PRODUTOS POR CATEGORIA ===\n");
    
    char categorias[10][30];
    int total_cats = 0;
    
    for(int i = 0; i < total_produtos; i++) {
        int encontrou = 0;
        for(int j = 0; j < total_cats; j++) {
            if(strcmp(produtos[i].categoria, categorias[j]) == 0) {
                encontrou = 1;
                break;
            }
        }
        if(!encontrou && total_cats < 10) {
            strcpy(categorias[total_cats], produtos[i].categoria);
            total_cats++;
        }
    }
    
    for(int i = 0; i < total_cats; i++) {
        printf("\n%s:\n", categorias[i]);
        for(int j = 0; j < total_produtos; j++) {
            if(strcmp(produtos[j].categoria, categorias[i]) == 0) {
                printf("  - %s\n", produtos[j].nome);
            }
        }
    }
}

// Controle de estoque / Atualizacoes

void atualizarEstoque() {
    int codigo, quantidade;
    char operacao;
    
    printf("\n=== ATUALIZAR ESTOQUE ===\n");
    printf("Codigo do produto: ");
    scanf("%d", &codigo);
    
    int indice = -1;
    for(int i = 0; i < total_produtos; i++) {
        if(produtos[i].codigo == codigo) {
            indice = i;
            break;
        }
    }
    
    if(indice == -1) {
        printf("Produto nao encontrado!\n");
        limparBuffer();
        return;
    }
    
    printf("Produto: %s\n", produtos[indice].nome);
    printf("Estoque atual: %d unidades\n", produtos[indice].quantidade);
    printf("Operacao (+ = entrada, - = saida): ");
    scanf(" %c", &operacao);
    printf("Quantidade: ");
    scanf("%d", &quantidade);
    limparBuffer();
    
    if(operacao == '+') {
        produtos[indice].quantidade += quantidade;
        printf("Entrada realizada! Novo estoque: %d\n", produtos[indice].quantidade);
    } else if(operacao == '-') {
        if(quantidade > produtos[indice].quantidade) {
            printf("Estoque insuficiente! Disponivel: %d\n", produtos[indice].quantidade);
        } else {
            produtos[indice].quantidade -= quantidade;
            printf("Saida realizada! Novo estoque: %d\n", produtos[indice].quantidade);
        }
    } else {
        printf("Operacao invalida! Use + ou -\n");
    }
}






